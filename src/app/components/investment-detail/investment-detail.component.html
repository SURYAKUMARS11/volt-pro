<div class="page-container">
  <!-- Header -->
  <div class="page-header">
    <button class="back-btn" (click)="goBack()">
      <i class="fas fa-arrow-left"></i>
    </button>
    <h2>Investment Details</h2>
    <div class="header-icon">
      <i class="fas fa-chart-line"></i>
    </div>
  </div>

  <!-- Plan Details Card -->
  <div class="plan-detail-section">
    <div class="plan-detail-card">
      <div class="plan-header">
        <div class="plan-image">
          <img [src]="plan.image" [alt]="plan.title">
          <div class="image-overlay">
            <i class="fas fa-star"></i>
          </div>
        </div>
        <div class="plan-info">
          <h3>{{plan.title}}</h3>
          <div class="plan-type">
            <i class="fas fa-crown"></i>
            {{plan.title.includes('Advanced') ? 'Advanced Plan' : 'Daily Plan'}}
          </div>
        </div>
      </div>

      <div class="plan-features">
        <div class="feature-item">
          <div class="feature-icon">
            <i class="fas fa-hand-holding-usd"></i>
          </div>
          <div class="feature-details">
            <div class="feature-label">Investment Amount</div>
            <div class="feature-value">₹{{plan.investment}}</div>
          </div>
        </div>

        <div class="feature-item">
          <div class="feature-icon">
            <i class="fas fa-calendar-day"></i>
          </div>
          <div class="feature-details">
            <div class="feature-label">Daily Income</div>
            <div class="feature-value">₹{{plan.dailyIncome}}</div>
          </div>
        </div>

        <div class="feature-item">
          <div class="feature-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="feature-details">
            <div class="feature-label">Duration</div>
            <div class="feature-value">{{plan.days}} Days</div>
          </div>
        </div>

        <div class="feature-item highlight">
          <div class="feature-icon">
            <i class="fas fa-trophy"></i>
          </div>
          <div class="feature-details">
            <div class="feature-label">Total Return</div>
            <div class="feature-value">₹{{plan.total}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quantity Selection -->
  <div class="quantity-section">
    <div class="section-title">
      <i class="fas fa-plus-circle"></i>
      <h3>Select Quantity</h3>
    </div>
    <div class="quantity-card">
      <div class="quantity-controls">
        <button class="quantity-btn" (click)="decreaseQuantity()" [disabled]="quantity <= 1">
          <i class="fas fa-minus"></i>
        </button>
        <div class="quantity-display">
          <span class="quantity-number">{{quantity}}</span>
          <span class="quantity-label">Plans</span>
        </div>
        <button class="quantity-btn" (click)="increaseQuantity()">
          <i class="fas fa-plus"></i>
        </button>
      </div>
      <div class="quantity-note">
        <i class="fas fa-info-circle"></i>
        You can purchase multiple plans to increase your daily income
      </div>
    </div>
  </div>

  <!-- Investment Summary -->
  <div class="summary-section">
    <div class="section-title">
      <i class="fas fa-calculator"></i>
      <h3>Investment Summary</h3>
    </div>
    <div class="summary-card">
      <div class="summary-row">
        <span class="summary-label">Plan</span>
        <span class="summary-value">{{plan.title}}</span>
      </div>
      <div class="summary-row">
        <span class="summary-label">Quantity</span>
        <span class="summary-value">{{quantity}} Plans</span>
      </div>
      <div class="summary-row">
        <span class="summary-label">Investment per Plan</span>
        <span class="summary-value">₹{{plan.investment}}</span>
      </div>
      <div class="summary-divider"></div>
      <div class="summary-row total">
        <span class="summary-label">Total Investment</span>
        <span class="summary-value">₹{{getTotalInvestment()}}</span>
      </div>
      <div class="summary-row income">
        <span class="summary-label">Daily Income</span>
        <span class="summary-value">₹{{getTotalDailyIncome()}}</span>
      </div>
      <div class="summary-row return">
        <span class="summary-label">Total Return</span>
        <span class="summary-value">₹{{getTotalReturn()}}</span>
      </div>
    </div>
  </div>

  <!-- Balance Check -->
  <div class="balance-section">
    <div class="balance-card" [class.insufficient]="!canAfford()">
      <div class="balance-info">
        <div class="balance-icon">
          <i class="fas fa-wallet"></i>
        </div>
        <div class="balance-details">
          <div class="balance-label">Your Balance</div>
          <div class="balance-amount">₹{{userBalance}}</div>
        </div>
      </div>
      <div class="balance-status" *ngIf="!canAfford()">
        <i class="fas fa-exclamation-triangle"></i>
        <span>Insufficient Balance</span>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="action-section">
    <button 
      class="invest-btn" 
      [disabled]="!canAfford()"
      (click)="proceedToInvest()">
      <i class="fas fa-rocket"></i>
      Invest ₹{{getTotalInvestment()}}
    </button>
    
    <button 
      class="recharge-btn" 
      *ngIf="!canAfford()"
      (click)="router.navigate(['/recharge'])">
      <i class="fas fa-credit-card"></i>
      Recharge Wallet
    </button>
  </div>

  <!-- Benefits Section -->
  <div class="benefits-section">
    <div class="section-title">
      <i class="fas fa-gift"></i>
      <h3>Plan Benefits</h3>
    </div>
    <div class="benefits-grid">
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-money-bill-wave"></i>
        </div>
        <div class="benefit-text">
          <div class="benefit-title">Daily Income</div>
          <div class="benefit-desc">Earn ₹{{getTotalDailyIncome()}} every day</div>
        </div>
      </div>
      
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="benefit-text">
          <div class="benefit-title">Secure Investment</div>
          <div class="benefit-desc">100% safe and guaranteed returns</div>
        </div>
      </div>
      
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-clock"></i>
        </div>
        <div class="benefit-text">
          <div class="benefit-title">Fixed Duration</div>
          <div class="benefit-desc">{{plan.days}} days investment period</div>
        </div>
      </div>
      
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="benefit-text">
          <div class="benefit-title">High Returns</div>
          <div class="benefit-desc">{{((getTotalReturn() - getTotalInvestment()) / getTotalInvestment() * 100).toFixed(0)}}% profit guaranteed</div>
        </div>
      </div>
    </div>
  </div>
</div>